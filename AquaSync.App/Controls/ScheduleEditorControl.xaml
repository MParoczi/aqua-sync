<UserControl
  x:Class="AquaSync.App.Controls.ScheduleEditorControl"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <!-- Row 0: Timeline canvas -->
    <Canvas x:Name="TimelineCanvas" Grid.Row="0" Height="48" SizeChanged="OnSizeChanged">

      <!-- Off segment: midnight to sunrise -->
      <Rectangle x:Name="OffLeft" Height="48" Fill="Gray" Opacity="0.25" />

      <!-- Ramp segment: sunrise to ramp-end (gradient from transparent to accent) -->
      <Rectangle x:Name="RampSegment" Height="48">
        <Rectangle.Fill>
          <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
            <GradientStop Color="Transparent" Offset="0" />
            <GradientStop Color="{ThemeResource SystemAccentColor}" Offset="1" />
          </LinearGradientBrush>
        </Rectangle.Fill>
      </Rectangle>

      <!-- On segment: ramp-end to sunset -->
      <Rectangle x:Name="OnSegment" Height="48" Fill="{ThemeResource SystemControlHighlightAccentBrush}" />

      <!-- Off segment: sunset to midnight -->
      <Rectangle x:Name="OffRight" Height="48" Fill="Gray" Opacity="0.25" />

      <!-- Sunrise drag handle -->
      <Ellipse
        x:Name="SunriseHandle"
        Width="16"
        Height="16"
        Fill="{ThemeResource SystemControlHighlightAccentBrush}"
        Stroke="{ThemeResource TextFillColorPrimaryBrush}"
        StrokeThickness="1.5"
        Visibility="Collapsed"
        PointerPressed="Handle_PointerPressed"
        PointerMoved="Handle_PointerMoved"
        PointerReleased="Handle_PointerReleased" />

      <!-- Sunset drag handle -->
      <Ellipse
        x:Name="SunsetHandle"
        Width="16"
        Height="16"
        Fill="{ThemeResource SystemControlHighlightAccentBrush}"
        Stroke="{ThemeResource TextFillColorPrimaryBrush}"
        StrokeThickness="1.5"
        Visibility="Collapsed"
        PointerPressed="Handle_PointerPressed"
        PointerMoved="Handle_PointerMoved"
        PointerReleased="Handle_PointerReleased" />

    </Canvas>

    <!-- Row 1: Time labels -->
    <Grid Grid.Row="1" Margin="0,4,0,0">
      <TextBlock
        x:Name="SunriseLabel"
        HorizontalAlignment="Left"
        Style="{StaticResource CaptionTextBlockStyle}"
        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
      <TextBlock
        x:Name="SunsetLabel"
        HorizontalAlignment="Right"
        Style="{StaticResource CaptionTextBlockStyle}"
        Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
    </Grid>

  </Grid>
</UserControl>
