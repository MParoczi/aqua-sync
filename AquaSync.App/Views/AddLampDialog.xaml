<ContentDialog
  x:Class="AquaSync.App.Views.AddLampDialog"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="using:AquaSync.App.Views"
  Title="Add Lamp"
  PrimaryButtonText="Add"
  IsPrimaryButtonEnabled="False"
  CloseButtonText="Cancel"
  DefaultButton="Close">

  <ContentDialog.Resources>
    <x:Double x:Key="ContentDialogMinWidth">500</x:Double>
    <x:Double x:Key="ContentDialogMaxWidth">500</x:Double>
  </ContentDialog.Resources>

  <StackPanel Spacing="12" MinWidth="0">

    <!-- Scanning indicator -->
    <StackPanel Orientation="Horizontal" Spacing="8">
      <ProgressRing x:Name="ScanningRing" IsActive="True" Width="20" Height="20" />
      <TextBlock
        x:Name="ScanningText"
        Text="Scanning for nearby Chihiros devicesâ€¦"
        VerticalAlignment="Center" />
    </StackPanel>

    <!-- Discovered devices list -->
    <ListView
      x:Name="DeviceList"
      ItemsSource="{x:Bind Devices}"
      SelectionChanged="DeviceList_SelectionChanged"
      MaxHeight="280"
      SelectionMode="Single">
      <ListView.ItemTemplate>
        <DataTemplate x:DataType="local:DiscoveredDeviceItem">
          <Grid ColumnSpacing="8" Padding="0,4" Opacity="{x:Bind ContainerOpacity}">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0">
              <TextBlock Text="{x:Bind Device.Name}" FontWeight="SemiBold" />
              <TextBlock
                Text="{x:Bind ModelDisplayName}"
                Style="{StaticResource CaptionTextBlockStyle}"
                Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
            </StackPanel>
            <FontIcon
              Grid.Column="1"
              Glyph="&#xE702;"
              VerticalAlignment="Center"
              FontFamily="{ThemeResource SymbolThemeFontFamily}" />
          </Grid>
        </DataTemplate>
      </ListView.ItemTemplate>
    </ListView>

    <!-- Bluetooth unavailable error -->
    <InfoBar
      x:Name="BluetoothErrorBar"
      Severity="Error"
      IsOpen="False"
      IsClosable="False"
      Title="Bluetooth Unavailable"
      Message="Bluetooth is not available on this device. Please check your Bluetooth settings and try again." />

  </StackPanel>
</ContentDialog>
