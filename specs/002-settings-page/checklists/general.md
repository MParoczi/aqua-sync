# General Requirements Quality Checklist: Global Settings Page

**Purpose**: Thorough audit of requirements completeness, clarity, consistency, and coverage across all five settings sections
**Created**: 2026-02-20
**Feature**: [spec.md](../spec.md)

**Note**: This checklist is generated by the `/speckit.checklist` command based on feature context and requirements.

## Requirement Completeness

- [x] CHK001 - Are requirements defined for what happens when the Settings page is accessed from AquariumSelectorPage vs ShellPage — specifically which sections are visible in each context? [Completeness, Spec §FR-001]
  > **PASS** — FR-001 updated: "When accessed from AquariumSelectorPage, only global settings sections are shown (no aquarium-scoped profile section)." Also covered by US-1 Scenario 5.
- [x] CHK002 - Are back-navigation requirements specified for the Settings page when accessed from AquariumSelectorPage (where does the user return to)? [Gap, Spec §FR-001]
  > **PASS** — FR-001 updated: "The user MUST be able to navigate back to AquariumSelectorPage from the Settings page." Also covered by US-1 Scenario 5.
- [x] CHK003 - Is the gear icon placement on AquariumSelectorPage specified with positioning requirements (e.g., top-right, within header)? [Gap, Spec §FR-001]
  > **PASS** — Placement is a design/implementation detail. The spec says "accessible from AquariumSelectorPage (e.g., via a gear icon)" which is sufficient at the requirements level.
- [x] CHK004 - Are requirements specified for when settings changes are persisted — immediately on each change, or via an explicit save action? [Completeness, Spec §FR-016]
  > **PASS** — US-1 says "preference is saved immediately." Theme changes are immediate (FR-011). Data folder change has an explicit confirmation flow. Save behavior is clear per section.
- [x] CHK005 - Is the save behavior for UOM default changes defined — auto-save on selection or require a save button? [Completeness, Spec §US-1]
  > **PASS** — US-1 explicitly says "the preference is saved immediately."
- [x] CHK006 - Are requirements specified for the visual layout/ordering of the five settings sections on the page? [Gap]
  > **PASS** — Layout ordering is a design concern. The user stories are prioritized P1–P5, which provides guidance without over-constraining.
- [x] CHK007 - Is the About section "brief description" content defined or at least bounded (max length, topic)? [Completeness, Spec §FR-015]
  > **PASS** — FR-015 updated to "a one-sentence description of the application's purpose." US-5 Scenario 3 provides example content.
- [x] CHK008 - Are requirements specified for how the version number is sourced (assembly version, package version, hardcoded)? [Gap, Spec §FR-015]
  > **PASS** — Implementation detail. The spec says "version number" which is unambiguous; the source is a standard .NET assembly version.
- [x] CHK009 - Is the ZIP archive file naming convention specified (e.g., auto-generated with timestamp, user-chosen filename)? [Gap, Spec §FR-013]
  > **PASS** — FR-013 updated: "The default filename MUST be `AquaSync-Export-YYYY-MM-DD.zip` with the current date." US-3 Scenario 1 also specifies this.
- [x] CHK010 - Are requirements defined for what "all application data" means at the file/folder level for export? The spec lists data types but not whether folder structure is preserved. [Completeness, Spec §FR-014]
  > **PASS** — FR-014 enumerates the 7 data types. Folder structure preservation is an implementation detail handled by the plan (ZipFile.CreateFromDirectory preserves structure).
- [x] CHK011 - Are requirements defined for the confirmation dialog before data folder migration (what information it shows, what actions are available)? [Gap, Spec §FR-009]
  > **PASS** — FR-009 updated: "a confirmation dialog MUST be shown displaying the source and destination paths." US-4 Scenario 2 specifies dialog shows source path, destination path, and duration warning.
- [x] CHK012 - Is the requirement for "reset to default data folder" defined — can the user revert to `%LOCALAPPDATA%/AquaSync/` after relocating? [Gap, Spec §FR-008]
  > **PASS** — New FR-019: "a 'Reset to default' button MUST be shown" when custom path is set. US-4 Scenarios 6–7 cover visibility and behavior.

## Requirement Clarity

- [x] CHK013 - Is "progress feedback" for data export quantified — indeterminate spinner vs determinate progress bar? [Clarity, Spec §FR-018]
  > **PASS** — Indeterminate vs determinate is a design decision. The spec says "progress indicator is visible" which is sufficient; the plan specifies indeterminate ProgressRing.
- [x] CHK014 - Is "progress feedback" for data folder move quantified — indeterminate spinner vs determinate progress bar? [Clarity, Spec §FR-017]
  > **PASS** — Same as CHK013. Design decision, not a spec concern.
- [x] CHK015 - Is "handle errors gracefully" in FR-017 defined with specific error messages or error categories? [Ambiguity, Spec §FR-017]
  > **PASS** — FR-017 updated to enumerate error scenarios: "On failure (disk full, permission denied, or partial copy)... displaying an error message identifying the cause." Edge cases also updated with example messages.
- [x] CHK016 - Is "rolling back on failure" defined — does rollback mean deleting partial copies at the destination, or something else? [Clarity, Spec §FR-017]
  > **PASS** — Edge case section says "rolls back to the original folder, leaves data intact at the source." The ISettingsService contract further specifies: "keep original, delete partial copy." Clear enough.
- [x] CHK017 - Is "without data loss" in FR-009 quantified — does it include file metadata, timestamps, and folder structure? [Clarity, Spec §FR-009]
  > **PASS** — "Without data loss" in the context of a local file copy/move is clear: all files and folders are present at the destination. File metadata and timestamps are preserved by standard file copy APIs.
- [x] CHK018 - Is "immediately" in FR-011 (theme change) quantified with a measurable threshold? SC-002 says "within 1 second" — does FR-011 align? [Clarity, Spec §FR-011 vs SC-002]
  > **PASS** — FR-011 uses "immediately" and SC-002 quantifies it as "within 1 second." These are consistent and the measurable criterion is defined.
- [x] CHK019 - Is "a brief description" in FR-015 defined with specific content or word count? [Ambiguity, Spec §FR-015]
  > **PASS** — Resolved with CHK007. FR-015 now specifies "a one-sentence description of the application's purpose."
- [x] CHK020 - Is "success message confirms the export location" specified — InfoBar, dialog, toast, or inline text? [Clarity, Spec §US-3 Scenario 3]
  > **PASS** — The existing SettingsPage already uses InfoBar for notifications (success/error). The established pattern is clear; no need to re-specify the notification mechanism.

## Requirement Consistency

- [x] CHK021 - Are the UOM default values consistent between the spec (FR-006: Liters/Centimeters) and the data model (AppSettings defaults: Liters/Centimeters)? [Consistency, Spec §FR-006 vs Data Model]
  > **PASS** — Both specify Liters and Centimeters as defaults.
- [x] CHK022 - Is the theme default consistent between FR-010 ("Follow system theme" default) and the data model (AppTheme.System)? [Consistency, Spec §FR-010 vs Data Model]
  > **PASS** — FR-010 says "Follow system theme (default)" and data model uses `AppTheme.System` with default value `System`. Consistent.
- [x] CHK023 - Is FR-001's dual access point requirement consistent with the existing constitution principle VI (single-aquarium context + dual-scope Settings)? [Consistency, Spec §FR-001 vs Constitution §VI]
  > **PASS** — Constitution v1.1.0 was updated to include dual scope for Settings. FR-001 is aligned.
- [x] CHK024 - Does the data export scope in FR-014 (lists 7 data types) align with the plan's approach (ZIP entire data folder)? If the plan ZIPs everything, unlisted data types may be included. [Consistency, Spec §FR-014 vs Plan]
  > **PASS** — FR-014 lists minimum required data types. ZIPping the entire folder is a superset which includes everything listed. Including extra files (like settings JSON) is harmless and beneficial for backup completeness.
- [x] CHK025 - Are the edge case definitions consistent with the functional requirements — e.g., edge case "same folder selected" is addressed but FR-008/FR-009 don't explicitly mention this guard? [Consistency, Spec §Edge Cases vs FR-008/FR-009]
  > **PASS** — Edge cases supplement functional requirements. The "same folder" guard is defined in the edge cases section and doesn't conflict with FR-008/FR-009.

## Acceptance Criteria Quality

- [x] CHK026 - Can SC-002 ("within 1 second") be objectively measured without implementation-specific tooling? [Measurability, Spec §SC-002]
  > **PASS** — "Within 1 second" is measurable by any observer. No special tooling required.
- [x] CHK027 - Is SC-004 ("seamlessly with all previously saved data intact") measurable — what does "seamlessly" mean in testable terms? [Measurability, Spec §SC-004]
  > **PASS** — SC-004 reworded to: "without errors or restart, with all previously saved data accessible in the new location."
- [x] CHK028 - Is SC-006 ("all settings persist correctly") measurable — does it define which settings and what "correctly" means beyond non-corruption? [Measurability, Spec §SC-006]
  > **PASS** — "All settings persist correctly across application restarts with no data loss" is measurable: close app, reopen, verify each setting value matches what was saved. The settings are enumerated in AppSettings (4 fields).
- [x] CHK029 - Are acceptance scenarios defined for the gear icon entry point on AquariumSelectorPage? No user story scenario covers this path explicitly. [Gap, Spec §US-1 through US-5]
  > **PASS** — US-1 Scenario 5 added: "Given the user is on the AquariumSelectorPage with no aquarium selected, When they open Settings via the gear icon, Then the Settings page shows only global settings sections and the user can navigate back."
- [x] CHK030 - Is the acceptance scenario for US-3 Scenario 4 ("no aquarium data") measurable — does "no data" mean zero profiles, or zero of any data type? [Clarity, Spec §US-3 Scenario 4]
  > **PASS** — "No aquarium data" means the data folder contains no user-created data (no profiles, no photos, etc.). In the current app, a fresh install with an empty data folder is a clear, testable state.

## Scenario Coverage

- [x] CHK031 - Are requirements defined for what happens when the user changes theme while on the AquariumSelectorPage (no aquarium context)? [Coverage, Spec §US-2]
  > **PASS** — FR-011 says theme changes take effect "immediately" across the "entire application." This is context-independent; the theme applies to the window root, not a specific page.
- [x] CHK032 - Are requirements defined for accessing Settings from the ShellPage footer when the aquarium is archived (read-only context)? [Coverage, Spec §FR-001]
  > **PASS** — Global settings are always editable regardless of aquarium status. The existing aquarium-scoped section already respects `IsReadOnly`. No new requirement needed.
- [x] CHK033 - Are requirements defined for what the user sees during app startup while settings are loading (before InitializeAsync completes)? [Coverage, Gap]
  > **PASS** — Settings load completes before the window is shown (InitializeAsync runs in OnLaunched before Activate). Users never see an intermediate state.
- [x] CHK034 - Is the scenario covered where the user navigates to Settings, changes theme, then navigates back — is the theme retained on all pages? [Coverage, Spec §FR-011]
  > **PASS** — FR-011 (immediate effect) + FR-012 (persists across sessions) cover this. Theme is set on the root element and applies globally.
- [x] CHK035 - Are requirements defined for concurrent operations — e.g., user changes UOM defaults while an export is in progress? [Coverage, Gap]
  > **PASS** — UOM changes are instant in-memory writes. Export reads from disk. No conflict scenario exists; these are independent operations.
- [x] CHK036 - Are requirements defined for what happens if the user initiates a data folder move and then navigates away from Settings before it completes? [Coverage, Gap]
  > **PASS** — FR-017 updated: "Navigation MUST be blocked (back button and sidebar items disabled) during the move to prevent leaving the page mid-operation." US-4 Scenario 3 also specifies this.

## Edge Case Coverage

- [x] CHK037 - Is the behavior defined when the custom data folder path becomes invalid between sessions (e.g., external drive removed, folder deleted)? [Edge Case, Gap]
  > **PASS** — New edge case added: "The system falls back to the default data folder location and displays a warning on the Settings page informing the user that the custom path was inaccessible."
- [x] CHK038 - Is the behavior defined when the user selects a network path or UNC path as the data folder? [Edge Case, Gap]
  > **PASS** — Network paths work with standard .NET file APIs. No special handling needed; any errors (network unavailable) are covered by the general "handle errors gracefully" edge case.
- [x] CHK039 - Is the behavior defined when the export destination has insufficient disk space? [Edge Case, Gap]
  > **PASS** — New edge case added: "The system displays an error message explaining the failure (e.g., 'Could not export data: insufficient disk space')." FR-018 also updated with error handling.
- [x] CHK040 - Is the behavior defined when the settings JSON file is corrupted or contains invalid enum values on next startup? [Edge Case, Gap]
  > **PASS** — The ISettingsService contract says: "Settings file corrupt/missing → Return defaults." This follows the existing DataService pattern of skipping corrupt files. Covered in plan/contracts.
- [x] CHK041 - Is the behavior defined when the data-folder-redirect.json points to a path that no longer exists? [Edge Case, Gap]
  > **PASS** — Resolved with CHK037. The new edge case covers invalid custom paths on startup, which includes the redirect file scenario.
- [x] CHK042 - Is the behavior defined when the user attempts to export to a read-only location? [Edge Case, Gap]
  > **PASS** — Covered by the ISettingsService error handling: "ExportDataAsync → Disk full / permissions → Throw IOException, caller shows error InfoBar."
- [x] CHK043 - Is the edge case of exporting while the data folder is on a different drive (cross-volume) addressed in requirements? [Edge Case, Spec §US-3]
  > **PASS** — ZipFile.CreateFromDirectory works regardless of source volume. No special requirement needed.
- [x] CHK044 - Is the edge case of data folder migration across drives (cross-volume copy) explicitly addressed, given it cannot use atomic move? [Edge Case, Spec §US-4]
  > **PASS** — The plan (R4) explicitly addresses this: "Copy-then-delete is safer than move — if copying fails midway, original data remains intact." Cross-volume is the reason copy-then-delete was chosen over Directory.Move.

## Non-Functional Requirements

- [x] CHK045 - Are accessibility requirements specified for the Settings page — keyboard navigation, screen reader labels, focus order? [Non-Functional, Gap]
  > **PASS** — Constitution Principle I mandates standard WinUI3 controls which provide built-in keyboard navigation, screen reader support, and focus management. No custom controls are used, so no additional accessibility requirements needed.
- [x] CHK046 - Are requirements defined for Settings page responsiveness at different window sizes? [Non-Functional, Gap]
  > **PASS** — The existing SettingsPage uses ScrollViewer + StackPanel with MaxWidth="700", a responsive pattern already established in the codebase. Standard WinUI3 layout behavior.
- [x] CHK047 - Is a maximum export file size or timeout defined for the data export operation? [Non-Functional, Gap]
  > **PASS** — This is a single-user desktop app performing local file operations. No practical size limit or timeout is needed. The export runs to completion on a background thread.
- [x] CHK048 - Are requirements defined for the UI remaining responsive (non-blocking) during long-running export or data folder move? The spec mentions "UI remains responsive" for export but not explicitly for folder move. [Non-Functional, Spec §Edge Cases vs FR-017]
  > **PASS** — Both FR-017 and FR-018 updated to include "keep the UI responsive by running on a background thread."
- [x] CHK049 - Is there a requirement for cancellation support during long-running operations (export, data folder move)? [Non-Functional, Gap]
  > **PASS** — New FR-020: "Export and data folder move operations MUST NOT support user-initiated cancellation. Once started, they run to completion." Explicitly excluded per user decision.

## Dependencies & Assumptions

- [x] CHK050 - Is the assumption documented that `%LOCALAPPDATA%` is always writable and available? [Assumption]
  > **PASS** — Standard Windows assumption. The existing DataService already relies on this; it's not a new assumption introduced by this feature.
- [x] CHK051 - Is the dependency on existing `VolumeUnit` and `DimensionUnit` enums documented — will changes to those enums affect settings? [Dependency, Spec §FR-003/FR-004]
  > **PASS** — The data model documents that AppSettings references existing enums. System.Text.Json serializes enums as strings, so adding new enum values won't break existing settings files.
- [x] CHK052 - Is the assumption documented that the data-folder-redirect.json bootstrap file location is fixed and never relocates? [Assumption, Data Model]
  > **PASS** — The data model explicitly states: "fixed location, never moves" with path `%LOCALAPPDATA%/AquaSync/data-folder-redirect.json`.
- [x] CHK053 - Are the data types listed in FR-014 (water parameter logs, maintenance logs, etc.) confirmed to exist in the current codebase, or are some future-planned? [Assumption, Spec §FR-014]
  > **PASS** — FR-014 reworded to: "MUST include all data currently present in the application data folder" with examples listed as "as they are implemented." New edge case clarifies missing data types are simply absent from the archive.

## Notes

- Check items off as completed: `[x]`
- Items referencing `[Gap]` indicate missing requirements that may need to be added to the spec
- Items referencing `[Ambiguity]` indicate unclear requirements that need clarification
- Items referencing `[Assumption]` indicate undocumented assumptions that should be validated
- Depth: Thorough | Focus: General | Audience: Reviewer
